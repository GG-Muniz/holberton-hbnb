-- HBnB Initial Data Insertion Script
-- This script populates the database with initial required data
-- Includes administrator user and essential amenities

-- Generate UUIDs and timestamps for consistent data
-- Note: In production, these would be generated by the application
SET @admin_id = 'admin-user-uuid-12345678901234567890';
SET @current_time = NOW();

-- Insert Administrator User
-- Password hash for 'admin123' using bcrypt (this should be generated by the application in production)
-- For demo purposes, using a placeholder hash - real hash should be generated by Flask-Bcrypt
INSERT INTO users (
    id, 
    email, 
    first_name, 
    last_name, 
    password_hash, 
    is_admin, 
    created_at, 
    updated_at
) VALUES (
    @admin_id,
    'admin@hbnb.com',
    'Admin',
    'User',
    '$2b$12$LQvOMYz8Z8BXSkCvnVH7qO7dKXeF5nBZJl5zQ5mPz.CzWKFKt8EKG', -- Placeholder hash for 'admin123'
    TRUE,
    @current_time,
    @current_time
);

-- Insert Initial Amenities
INSERT INTO amenities (id, name, created_at, updated_at) VALUES
    ('amenity-wifi-uuid-123456789012345678', 'WiFi', @current_time, @current_time),
    ('amenity-pool-uuid-123456789012345678', 'Swimming Pool', @current_time, @current_time),
    ('amenity-parking-uuid-12345678901234567', 'Parking', @current_time, @current_time),
    ('amenity-gym-uuid-1234567890123456789', 'Gym', @current_time, @current_time),
    ('amenity-spa-uuid-1234567890123456789', 'Spa', @current_time, @current_time),
    ('amenity-restaurant-uuid-123456789012', 'Restaurant', @current_time, @current_time),
    ('amenity-bar-uuid-1234567890123456789', 'Bar', @current_time, @current_time),
    ('amenity-laundry-uuid-123456789012345', 'Laundry Service', @current_time, @current_time),
    ('amenity-concierge-uuid-12345678901234', 'Concierge', @current_time, @current_time),
    ('amenity-roomservice-uuid-123456789012', 'Room Service', @current_time, @current_time),
    ('amenity-aircon-uuid-123456789012345678', 'Air Conditioning', @current_time, @current_time),
    ('amenity-heating-uuid-123456789012345678', 'Heating', @current_time, @current_time),
    ('amenity-kitchen-uuid-123456789012345678', 'Kitchen', @current_time, @current_time),
    ('amenity-balcony-uuid-123456789012345678', 'Balcony', @current_time, @current_time),
    ('amenity-garden-uuid-123456789012345678', 'Garden', @current_time, @current_time);

-- Insert Sample Places (for testing purposes)
-- These demonstrate the schema functionality
INSERT INTO places (
    id,
    name,
    description,
    address,
    city_id,
    latitude,
    longitude,
    host_id,
    number_of_rooms,
    number_of_bathrooms,
    price_per_night,
    max_guests,
    created_at,
    updated_at
) VALUES
    (
        'place-demo-beach-house-123456789012',
        'Luxury Beach House',
        'Beautiful beachfront property with stunning ocean views',
        '123 Ocean Drive',
        'city-miami-uuid-123456789012345678',
        25.7617,
        -80.1918,
        @admin_id,
        4,
        3,
        299.99,
        8,
        @current_time,
        @current_time
    ),
    (
        'place-demo-mountain-cabin-12345678901',
        'Cozy Mountain Cabin',
        'Rustic cabin nestled in the mountains, perfect for nature lovers',
        '456 Mountain Trail',
        'city-aspen-uuid-123456789012345678',
        39.1911,
        -106.8175,
        @admin_id,
        2,
        1,
        149.99,
        4,
        @current_time,
        @current_time
    );

-- Associate amenities with places
-- Beach house gets luxury amenities
INSERT INTO place_amenity (place_id, amenity_id) VALUES
    ('place-demo-beach-house-123456789012', 'amenity-wifi-uuid-123456789012345678'),
    ('place-demo-beach-house-123456789012', 'amenity-pool-uuid-123456789012345678'),
    ('place-demo-beach-house-123456789012', 'amenity-parking-uuid-12345678901234567'),
    ('place-demo-beach-house-123456789012', 'amenity-gym-uuid-1234567890123456789'),
    ('place-demo-beach-house-123456789012', 'amenity-spa-uuid-1234567890123456789'),
    ('place-demo-beach-house-123456789012', 'amenity-aircon-uuid-123456789012345678'),
    ('place-demo-beach-house-123456789012', 'amenity-kitchen-uuid-123456789012345678'),
    ('place-demo-beach-house-123456789012', 'amenity-balcony-uuid-123456789012345678');

-- Mountain cabin gets basic amenities
INSERT INTO place_amenity (place_id, amenity_id) VALUES
    ('place-demo-mountain-cabin-12345678901', 'amenity-wifi-uuid-123456789012345678'),
    ('place-demo-mountain-cabin-12345678901', 'amenity-parking-uuid-12345678901234567'),
    ('place-demo-mountain-cabin-12345678901', 'amenity-heating-uuid-123456789012345678'),
    ('place-demo-mountain-cabin-12345678901', 'amenity-kitchen-uuid-123456789012345678');

-- Display insertion status
SELECT 'Initial data inserted successfully!' AS status;
SELECT 
    'Inserted: 1 admin user, 15 amenities, 2 sample places with amenity associations' AS summary;

-- Verify the data was inserted correctly
SELECT 'Verification Queries:' AS verification;
SELECT COUNT(*) AS total_users FROM users;
SELECT COUNT(*) AS total_amenities FROM amenities;
SELECT COUNT(*) AS total_places FROM places;
SELECT COUNT(*) AS total_place_amenity_associations FROM place_amenity;